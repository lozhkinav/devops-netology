
# Домашнее задание к занятию "11.02 Микросервисы: принципы"

Вы работаете в крупной компанию, которая строит систему на основе микросервисной архитектуры.
Вам как DevOps специалисту необходимо выдвинуть предложение по организации инфраструктуры, для разработки и эксплуатации.

## Задача 1: API Gateway 

Предложите решение для обеспечения реализации API Gateway. Составьте сравнительную таблицу возможностей различных программных решений. На основе таблицы сделайте выбор решения.

Решение должно соответствовать следующим требованиям:
- Маршрутизация запросов к нужному сервису на основе конфигурации
- Возможность проверки аутентификационной информации в запросах
- Обеспечение терминации HTTPS

Обоснуйте свой выбор.

### Ответ:
Информацию брал от [сюда] (https://www.nginx.com/blog/choosing-the-right-api-gateway-pattern)
Критерий                    | Центральный шлюз | Two-tier gateway | Микрошлюз | Шлюзы per-pod | Sidecar, Service Mash
--------------------------- | ---------------- | ---------------- | --------- | ------------- | --------------------- 
SSL/TLS	                    |         +	       |         +	      |     +	  |       +	      |            +
Аутентификация              |         +	       |         +	      |     +	  |       +	      |            +
Авторизация	                |         +	       |         +		  |     +     |               |                       
Маршрутизация запросов      |         +	       |         +	      |     +	  |       +	      |           
Ограничение скорости        |         +	       |	     +	      |     +	  |               |
Манипуляция запросом/ответом|         +        |			      |           |               |
Логирование             	|         -        |         +		  |     +	  |       +       | 
Отслеживание инъекций		|         +        | 		 +        |     +     |               | 
Балансировка нагрузки		|         +	       |         +		  |     +     |               |  
.                           | Подходит для монолита, не подходит при частых изменений | не поддерживает распределенное управление,подходит для обеспечения гибкости | подходит для отдельных команд разработки, может управлять трафиком между службами |
сложно добиться согласованности и контроля  | применяется при использовании с одним из предудещих 3х решений
Использует прокси-сервер, Конфигурация статична, не требует модификации при изменении приложения | сложность в управлении
- На осоновании анализа таблицы, можно применить либо микрошлюзы либо шлюз per-pod, оба варианта поддерживают маршрутизацию. Микрошлюзы при использовании микросервисов могут обеспечить автономность для каждой отдельной команды, разрабатывающей свой отдельный сервис.

## Задача 2: Брокер сообщений

Составьте таблицу возможностей различных брокеров сообщений. На основе таблицы сделайте обоснованный выбор решения.

Решение должно соответствовать следующим требованиям:
- Поддержка кластеризации для обеспечения надежности
- Хранение сообщений на диске в процессе доставки
- Высокая скорость работы
- Поддержка различных форматов сообщений
- Разделение прав доступа к различным потокам сообщений
- Протота эксплуатации

Обоснуйте свой выбор.

